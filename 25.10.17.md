---
date: 2025-10-17
title: "Daily Log — Meta Pixel + CAPI Integration Milestone"
project: "Life Insurance Funnel (Dan_Elkins_Pilot)"
tags: ["meta", "capi", "pixel", "perspective", "funnel", "andromeda"]
---

## 🧭 Overview
Today’s focus was on **establishing a clean data foundation** for our life insurance funnel under the Andromeda standard — ensuring Meta receives accurate, deduplicated signals from both browser and server sides through Perspective’s native Conversion API integration.

---

## 🧩 Technical Progress

**Objective:** Create a verified Pixel + CAPI connection inside Perspective for Dataset `Dan_Elkins_Pilot`.

| Component | Status | Notes |
|------------|---------|-------|
| **Pixel ID** | ✅ `723200594140264` | Installed via Perspective Meta integration |
| **Dataset** | ✅ `Dan_Elkins_Pilot` | Source of Dataset Quality API access token |
| **Access Token** | ✅ Generated via Dataset Quality API | Added to Perspective and saved successfully |
| **CAPI Connection** | ✅ Verified | Received “Server” events in Meta Test Events |
| **Deduplication** | ✅ Confirmed | Shared `event_id` between browser + server events |
| **Test Event Code** | ✅ Used + Removed | Enabled real-time CAPI verification |
| **Diagnostics** | 🕒 To Monitor | Expect quality metrics after 24–48h of traffic |
| **Event Mapping** | ⏸ Deferred | Pending finalized funnel flow and naming |

---

## 🧠 Learnings & Clarifications

- **Browser vs. Server Events:**  
  - Browser = Meta Pixel firing from the user’s device.  
  - Server = Perspective sending CAPI events from its backend.  
  - Both now arrive with identical timestamps and unique `event_id` values.

- **Deduplication Process:**  
  Meta merges identical `event_id` pairs (browser + server) and counts them as a single event.  
  Duplicates seen in Test Events are for debugging only — the live dataset automatically filters them out.

- **Perspective Integration Behavior:**  
  - Test code used to confirm server connection (`test_event_code`).  
  - Partner integration ensures browser data flows instantly.  
  - Server events validated through access token and dataset match.

---

## 🧾 Proof of Life

- **Browser Events:**  
  Confirmed via Perspective “Partner Integration.”  
- **Server Events:**  
  Confirmed via “Manual Setup (API)” — timestamp aligned.  
- **Deduplication:**  
  Active; Meta processes one unified event through shared `event_id`.

---

## 🚀 Outcome

- The Life Insurance funnel now has a **fully operational, clean dual-signal pipeline** (Pixel + CAPI).  
- This establishes the **data trust layer** for Andromeda-level optimization — ready for creative testing and behavioral segmentation.

---

## 🔭 Next Steps

1. **Monitor Diagnostics**
   - Check for Event Match Quality (target 6+)
   - Review deduplication rate after 24–48 hours

2. **Funnel Architecture**
   - Define user journey + quiz logic  
   - Identify zero-party data fields for segmentation  
   - Outline emotional-state mapping for ad creative flow

3. **Event Mapping (later)**
   - Assign finalized Perspective events to standard Meta events:  
     - `Page Viewed` → `PageView`  
     - `Funnel Started` → `ViewContent`  
     - `Funnel Completed` → `Lead`  
     - `Call Booked` → `Schedule`

4. **Security + Hygiene**
   - Add funnel domains to dataset Allow List once URLs are fixed  
   - Store access token securely in `.env` (ignored by Git)

---

## 🧱 Reflection

Clean data equals leverage.  
Today’s work laid the invisible infrastructure that will train Meta’s machine learning on *real user behavior*, not noise.  
Next focus: **design the funnel logic that gives meaning to that data.**  
Once structure + messaging align, every campaign we launch will compound instead of restart from zero.

---
